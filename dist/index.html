<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#3367D6">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com" />
    <link rel="dns-prefetch" href="https://maps.googleapis.com" />
    <link rel="preconnect" href="http://127.0.0.1:1337" />
    <link rel="stylesheet" src="//normalize-css.googlecode.com/svn/trunk/normalize.css" />
    <style>@charset "utf-8";body,p,td,th{font-family:Arial,Helvetica,sans-serif;font-size:10pt;line-height:1.5}html{overflow-x:hidden}body{background-color:#fdfdfd;margin:0;position:relative;overflow-x:hidden}li,ul{font-family:Arial,Helvetica,sans-serif;font-size:10pt;color:#333}a{color:orange;text-decoration:none}a:focus,a:hover{color:#3397db;text-decoration:none}a img{border:none 0 #fff}img:not([src]){visibility:hidden}@-moz-document url-prefix(){img:-moz-loading{visibility:hidden}}h1,h2,h3,h4,h5,h6{font-family:Arial,Helvetica,sans-serif;margin:0 0 20px}article,aside,canvas,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}#skipLink{position:absolute;top:-10000px}#maincontent{background-color:#f3f3f3;min-height:100%;display:grid}.restaurantcontent{grid-template-areas:"map" "restaurant" "review"}#footer{background-color:#444;color:#aaa;font-size:8pt;letter-spacing:1px;padding:25px;text-align:center;text-transform:uppercase;width:100%}#footer-info{margin:0;width:95%;color:#fff}nav{width:100%;height:80px;background-color:#252831;text-align:center}nav h1{margin:auto;width:90%}nav h1 a{color:#fff;font-size:14pt;font-weight:200;letter-spacing:10px;text-transform:uppercase}.nav-title{padding:1em}#breadcrumb{padding:10px 40px 16px;list-style:none;background-color:#eee;font-size:17px;margin:0;width:calc(100% - 10px)}#breadcrumb li{display:inline}#breadcrumb li+li:before{padding:8px;color:#000;content:"/\00a0"}#breadcrumb li a{color:#0275d8;text-decoration:none}#breadcrumb li a:hover{color:#01447e;text-decoration:underline}#map{height:400px;width:100%;background-color:#ccc}.filter-options{width:100%;height:5.5em;background-color:#252831;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:1em 2em;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;height:initial}.filter-options h2{color:#fff;font-size:1rem;font-weight:400;line-height:1;margin:0 20px}.filter-options select{background-color:#fff;border:1px solid #fff;font-family:Arial,sans-serif;font-size:11pt;height:35px;letter-spacing:0;margin:10px;padding:0 10px;width:200px}#restaurants-list{background-color:#f3f3f3;list-style:outside none none;margin:0 auto;padding:30px 15px 60px;text-align:center;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-preferred-size:auto;flex-basis:auto;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;flex-direction:initial;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:5%}#restaurants-list li{background-color:#fff;border:2px solid #ccc;font-family:Arial,sans-serif;margin:15px;min-height:380px;padding:0 30px 25px;text-align:left;width:270px;padding:1em 1em}#restaurants-list .restaurant-img{background-color:#ccc;display:block;margin:0;max-width:100%;min-height:248px;min-width:100%}#restaurants-list li h3{color:#000;font-family:Arial,sans-serif;font-size:14pt;font-weight:200;letter-spacing:0;line-height:1.3;margin:20px 0 10px;text-transform:uppercase}#restaurants-list p{margin:0;font-size:11pt}#restaurants-list li a{background-color:orange;border-bottom:3px solid #eee;color:#000;display:inline-block;font-size:10pt;margin:15px 0 0;padding:8px 30px 10px;text-align:center;text-decoration:none;text-transform:uppercase}#restaurant-info{padding-left:1em}.inside header{position:fixed;top:0;width:100%;z-index:1000}.inside #map-container{background:#00f none repeat scroll 0 0;height:29em;width:90%;grid-area:map}.inside #map{background-color:#ccc;height:100%;width:100%}.inside #footer{bottom:0;position:absolute}#restaurant-name{grid-area:name;color:#f18200;font-family:Arial,sans-serif;font-size:20pt;font-weight:200;letter-spacing:0;margin:15px 0 30px;text-transform:uppercase;line-height:1.1}#restaurant-img{width:90%;border-radius:15px 0 15px 0}#restaurant-address{font-size:12pt;margin:10px 0}#restaurant-cuisine{background-color:#333;color:#ddd;font-size:12pt;font-weight:300;letter-spacing:10px;margin:0 0 20px;padding:2px 0;text-align:center;text-transform:uppercase;width:90%}#restaurant-container{grid-area:restaurant}#restaurant-container,#reviews-container{border-bottom:1px solid #d9d9d9;border-top:1px solid #fff;padding:140px 40px 30px;width:90%}#reviews-container{padding:30px 40px 80px;grid-area:review}#reviews-container h2{color:#f58500;font-size:24pt;font-weight:300;letter-spacing:-1px;padding-bottom:1pt}#reviews-list{margin:0;padding:0}#reviews-list li{grid-area:reviews-list;background-color:#fff;border:2px solid #f3f3f3;display:block;list-style-type:none;margin:0 0 30px;overflow:hidden;position:relative;width:85%;border-radius:15px 0 15px 0}#reviews-list li p{padding:.4em;font-size:1.2em;margin:0}#restaurant-hours td{color:#666}.review-heading{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;background-color:#000;color:#fff;padding:0 .4em;margin-bottom:1em;border-radius:15px 0 0 0}.review-name{color:#fff}.review-date{font-size:1.2em;color:gray}.review-info{margin:0 1.5em}.review-rating{background-color:orange;color:#fff;text-align:center;padding:.2em;max-width:6em;border-radius:8%;margin-left:1em}.review-comment{color:gray}@media (max-width:480px){.filter-options{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;height:initial;padding:1em 0}#reviews-list li p{font-size:1em}}@media (max-width:720px){#restaurant-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:inherit}.inside #map-container{width:125%}}@media (min-width:720px){#restaurant-container{display:-webkit-box;display:-ms-flexbox;display:flex}.inside #map-container{height:auto}}</style>
    <title>Jawann's Snobby Restaurant Reviews</title>

</head>

<body>
    <header role="banner">
        <a href="#maincontent" id="skipLink">Skip to main content</a>
        <nav role="navigation">
            <h1 class="nav-title"><a href="/">Restaurant Reviews</a></h1>
        </nav>
    </header>

    <main id="maincontent" role="main">
       
        <section>
            <div class="filter-options">
                <h2>Filter Results</h2>
                <label for="neighborhoods-select">
          <select role="listbox" id="neighborhoods-select" aria-label="select neighborhood" name="neighborhoods" onchange="updateRestaurants()" aria-activedescendant="all">
            <option  id="all" value="all">All Neighborhoods</option>
          </select>
        </label>
                <label for="cuisines-select">
          <select role="listbox" id="cuisines-select" aria-label="select cuisines" name="cuisines" onchange="updateRestaurants()">
            <option value="all">All Cuisines</option>
          </select>
        </label>

            </div>
            <ul id="restaurants-list"></ul>
        </section>
        <section id="map-container" role="application">
            <div id="map"></div>
        </section>
    </main>
   
    <footer id="footer">
        <p id="footer-info">
            Copyright (c) 2018 <a href="/"><strong>Restaurant Reviews</strong></a> All Rights Reserved.
        </p>

    </footer>

     <script>class DBHelper{static get DATABASE_URL(){return"http://127.0.0.1:1337/restaurants"}static fetchRestaurants(e){fetch(this.DATABASE_URL).then(e=>e.json()).then(t=>{return e(null,t)})}static fetchRestaurantById(e,t){DBHelper.fetchRestaurants((n,s)=>{if(n)t(n,null);else{const n=s.find(t=>t.id==e);n?t(null,n):t("Restaurant does not exist",null)}})}static fetchRestaurantByCuisine(e,t){DBHelper.fetchRestaurants((n,s)=>{if(n)t(n,null);else{const n=s.filter(t=>t.cuisine_type==e);t(null,n)}})}static fetchRestaurantByNeighborhood(e,t){DBHelper.fetchRestaurants((n,s)=>{if(n)t(n,null);else{const n=s.filter(t=>t.neighborhood==e);t(null,n)}})}static fetchRestaurantByCuisineAndNeighborhood(e,t,n){DBHelper.fetchRestaurants((s,a)=>{if(s)n(s,null);else{let s=a;"all"!=e&&(s=s.filter(t=>t.cuisine_type==e)),"all"!=t&&(s=s.filter(e=>e.neighborhood==t)),n(null,s)}})}static fetchNeighborhoods(e){DBHelper.fetchRestaurants((t,n)=>{if(t)e(t,null);else{const t=n.map((e,t)=>n[t].neighborhood),s=t.filter((e,n)=>t.indexOf(e)==n);e(null,s)}})}static fetchCuisines(e){DBHelper.fetchRestaurants((t,n)=>{if(t)e(t,null);else{const t=n.map((e,t)=>n[t].cuisine_type),s=t.filter((e,n)=>t.indexOf(e)==n);e(null,s)}})}static urlForRestaurant(e){return`./restaurant.html?id=${e.id}`}static imageUrlForRestaurant(e){return`/img/${e.photograph}`}static mapMarkerForRestaurant(e,t){return new google.maps.Marker({position:e.latlng,title:e.name,url:DBHelper.urlForRestaurant(e),map:t,animation:google.maps.Animation.DROP})}}let restaurants,neighborhoods,cuisines;var map,markers=[];document.addEventListener("DOMContentLoaded",e=>{fetchNeighborhoods(),fetchCuisines()}),fetchNeighborhoods=(()=>{DBHelper.fetchNeighborhoods((e,t)=>{e?console.error(e):(self.neighborhoods=t,fillNeighborhoodsHTML())})}),fillNeighborhoodsHTML=((e=self.neighborhoods)=>{const t=document.getElementById("neighborhoods-select");e.forEach(e=>{const n=document.createElement("option");n.innerHTML=e,n.value=e,n.setAttribute("aria-label",e),t.append(n)})}),fetchCuisines=(()=>{DBHelper.fetchCuisines((e,t)=>{e?console.error(e):(self.cuisines=t,fillCuisinesHTML())})}),fillCuisinesHTML=((e=self.cuisines)=>{const t=document.getElementById("cuisines-select");e.forEach(e=>{const n=document.createElement("option");n.innerHTML=e,n.value=e,t.append(n)})}),window.initMap=(()=>{self.map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:40.722216,lng:-73.987501},scrollwheel:!1}),updateRestaurants()}),updateRestaurants=(()=>{const e=document.getElementById("cuisines-select"),t=document.getElementById("neighborhoods-select"),n=e.selectedIndex,s=t.selectedIndex,a=e[n].value,r=t[s].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(a,r,(e,t)=>{e?console.error(e):(resetRestaurants(t),fillRestaurantsHTML())})}),resetRestaurants=(e=>{self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers.forEach(e=>e.setMap(null)),self.markers=[],self.restaurants=e}),fillRestaurantsHTML=((e=self.restaurants)=>{const t=document.getElementById("restaurants-list");e.forEach(e=>{t.append(createRestaurantHTML(e))}),addMarkersToMap()}),createRestaurantHTML=(e=>{const t=document.createElement("li"),n=document.createElement("img");n.className="restaurant-img lazy",n.src=`/images/${e.id}-270.jpg`,n.alt="photo of "+e.name,n.dataset.src=`/images/${e.id}-270.jpg`,t.append(n);const s=document.createElement("h3");s.innerHTML=e.name,t.append(s);const a=document.createElement("p");a.innerHTML=e.neighborhood,t.append(a);const r=document.createElement("p");r.innerHTML=e.address,t.append(r);const o=document.createElement("a");return o.innerHTML="View Details",o.href=DBHelper.urlForRestaurant(e),o.setAttribute("aria-label",`Learn more about ${e.name}`),t.append(o),t}),addMarkersToMap=((e=self.restaurants)=>{e.forEach(e=>{const t=DBHelper.mapMarkerForRestaurant(e,self.map);google.maps.event.addListener(t,"click",()=>{window.location.href=t.url}),self.markers.push(t)})}),"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js").then(function(e){console.log("Registration succeeded. Scope is "+e.scope)}).catch(function(e){console.log("Registration failed with "+e)});</script>
     <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBoMtReqrjzZfl-ubFwu7eCTxQhNccmo0w&libraries=places&callback=initMap"></script>



</html>